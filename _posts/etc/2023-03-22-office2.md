---
published: true
title: "새로 알게 된 것들 (지속 업데이트 중)"
categories:
  - etc
tags:
  - etc
toc: true
toc_sticky: true
sidebar:
  nav: "sidebar-category"
---

## 알게 된 것
* 회사 업무 중이나, 교육 및 등등 , 아무튼 새로 알게된 짤막한 지식들 정리, 검색해서 다시보기

### Objects.requireNonNull
* null 체크를 위한 메소드
* 파라미터로 입력 된 값이 null 이라면 NPE 발생, 아니라면 입력값 반환
  
```java
//if문을 사용한 수동 널 체크
String nullString = null;

if (nullString == null) {
    throw new NullPointerException("입력이 null 입니다!");
}

//requireNonNull 을 사용한 널 체크
String nullString = null;

Objects.requireNonNull(nullString, "입력이 null 입니다!");

//가독성이 더 좋고 명시적이다.

```

### 표준예외 처리
* IllegalArgumentException 
  * 인수로 부적절한 값을 넘길 때 던지는 예외
  * 파라미터로 null 값이 들어오면 관례상 IllegalArgumentException보다는 NullPointerException을 던진다
  * 시퀀스의 허용 범위를 넘는 값을 건넬 때도 IllegalArgumentException보다는 IndexOutOfBoundsException을 던진다
* IllegalStateException
  * 대상 객체의 상태가 호출된 메서드를 수행하기에 적절하지 않을 때 던짐
* ConcurrentModificationException
  * 단일 스레드에서 사용하려고 설계한 객체를 여러 스레드가 동시에 수정하려 할 때 던진다.
* UnsupportedOperationException
  * 예외는 클라이언트가 요청한 동작을 대상 객체가 지원하지 않을 때 던진다.
  * 보통 구현하려는 인터페이스의 메서드 일부를 구현할 수 없는 경우에 사용
* ArithmeticException, NumberFormatException
  * 복소수나 유리수를 다루는 객체를 사용할 때 사용
  * 10 / 0 과 같은 연산을 할 때 ArithmeticException이 발생한다.
  * 숫자형 파라미터가 와야 하는 부분에 String이라든지 다른 형식의 데이터가 들어오는 경우 NumberFormatException이 발생
* 예외 사용 시 주의 할 점
  * Exceiption, RuntimeException, Thorwable, Error은 직접적으로 재 사용 하지 말자.
  * 예외에서 더 많은 정보를 제공하길 원한다면 표준 예외를 확장하자

### XSS
&nbsp; XSS란 Cross-site Scripting의 약자, 사이트 간 스크립팅을 의미한다. 웹 어플리케이션에서 많이 나타나는 취약점의 하나로 웹사이트 관리자가 아닌 사람이 웹 페이지에 악성 자바스크립트를 삽입 하는 것.

```javascript
//게시판의 다음과 같은 게시물을 입력
<script>alert('바보녀석') </script>

//게시물을 읽었을때, alert 창이 떠버리면 XSS가 뚫려 있다는 것이다.

```

* XSS의 주 목적은 웹 사이트의 변조보다는 사용자의 세션 탈취이다. 상황에 따라 다르겠지만, 관리자 계정을 훔쳐 로그인 하는것도 가능.
* 악성 스크립트 게시물을 보았을때, 열람자의 쿠키 값을 가로채서 가로챈 쿠키 값을 웹 프록시 툴을 이용해 재전송, 열람자의 정보로 로그인이 가능

### XSS 예방 및 대책
**1. 입.출력값 검증 및 무효화 Validation** <br>
&nbsp; XSS취약점을 근본적으로 제거하기 위해서는 XSS Cheat Sheet를 참고하여 스크립트 등 해킹에 사용되는 입력 및 출력 값에 대해서 검증하고 무효화시켜야 한다. 출력 값을 무효화하기 위해서는 XSS 공격은 기본적으로 script 태그를 사용하기 때문에 XSS 공격을 차단하기 위해 태그 문자(<,>) 등 위험한 문자 입력 시 기본적으로 문자 참조로 필터링한다. 예를 들어 "<" 를 "&lt"로 인코딩 할수 있다.
<br><br>

**2. 보안 라이브러리 활용(AntiXSS, OWASP ESAPI 등)** <br>
&nbsp; OWASP는 보안을 위해 웹 응용 취약점을 대응할 수 있는 오픈소스 ESAPI 라이브러리를 제공한다. XSS취약점을 예방하기 위해 API는 validator와 encoder가 있다. 그 중 validator는 입력 값을 필터링하는 기능을 하고 있으며, encoder는 출력 값을 인코딩 및 디코딩 기능을 가지고 있다.

Tip. 
1. JSTL의 경우 <c:out value=""/> 를 통해, XML filter를 사용할수 있다.
2. 여의치 않을 경우 ${fn:escapeXML(parameter)} 이런식으로도 가능
